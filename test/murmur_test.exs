defmodule MurmurTest do
  use ExUnit.Case
  doctest Murmur
  import Murmur

  test "x86_32" do
    assert hash_x86_32("") == 0
    assert hash_x86_32("random_stuff") == hash_x86_32("random_stuff", 0)
    assert hash_x86_32(:test)

    [
      {"", 0, 0},
      {"", 1, 1_364_076_727},
      {"0", 0, 3_530_670_207},
      {"01", 0, 1_642_882_560},
      {"012", 0, 3_966_566_284},
      {"0123", 0, 3_558_446_240},
      {"01234", 0, 433_070_448},
      {"b2622f5e1310a0aa14b7f957fe4246fa", 2_147_368_987, 3_297_211_900}
    ]
    |> Enum.each(fn {data, seed, expected} ->
      assert hash_x86_32(data, seed) == expected
    end)
  end

  test "x86_128" do
    assert hash_x86_128("") == 0
    assert hash_x86_128("random_stuff") == hash_x86_128("random_stuff", 0)
    assert hash_x86_128(:test)

    [
      {"asdfqwer", 0, 175_504_436_512_095_274_433_824_208_945_657_775_294},
      {"", 0, 0},
      {"", 1, 112_745_568_952_095_539_304_722_219_991_719_783_916},
      {"0", 0, 220_543_883_451_499_871_284_187_321_612_475_973_790},
      {"01", 0, 137_321_874_326_339_305_098_181_565_140_844_391_604},
      {"012", 0, 101_124_353_311_974_478_471_016_843_751_483_309_733},
      {"0123", 0, 96_188_378_572_783_053_222_457_303_740_741_816_298},
      {"01234", 0, 903_794_947_179_251_542_154_595_124_069_643_246},
      {"012345", 0, 329_842_349_853_404_661_313_702_735_247_573_441_653},
      {"b2622f5e1310a0aa14b7f957fe4246fa", 2_147_368_987,
       41_703_641_970_572_727_370_229_238_214_115_525_711}
    ]
    |> Enum.each(fn {data, seed, expected} ->
      assert hash_x86_128(data, seed) == expected
    end)
  end

  test "x64_128" do
    assert hash_x86_128("") == 0
    assert hash_x86_128("random_stuff") == hash_x86_128("random_stuff", 0)
    assert hash_x86_128(:test)

    [
      {"asdfqwer", 0, 259_562_416_584_950_860_532_122_463_349_073_498_983},
      {"", 0, 0},
      {"", 1, 108_177_238_965_372_658_051_732_455_265_379_769_525},
      {"0", 0, 77_832_081_575_998_147_576_267_703_913_017_680_768},
      {"01", 0, 306_492_543_119_272_612_795_719_006_631_500_017_806},
      {"012", 0, 281_942_414_714_165_914_479_726_705_557_978_075},
      {"0123", 0, 240_291_641_590_490_688_718_251_893_415_321_240_148},
      {"01234", 0, 314_759_026_063_816_137_774_093_326_316_203_884_481},
      {"012345", 0, 171_502_485_648_129_393_034_657_596_489_443_707_431},
      {"b2622f5e1310a0aa14b7f957fe4246fa", 2_147_368_987,
       326_275_246_143_462_972_595_823_637_050_028_897_938}
    ]
    |> Enum.each(fn {data, seed, expected} ->
      assert hash_x64_128(data, seed) == expected
    end)
  end
end
